---
layout: post
title: 企业应用架构模式（十）-数据源架构模式
date: 2015-02-26 22:54:00
comments: false
---

##10.数据源架构模式
###10.1 表数据入口（Table Data Gateway）
充当数据库表访问入口的对象，一个实例处理表中所有的行。

*表数据入口*最重要的是它如何从查询返回信息：

- 返回某种简单数据结构，如map。
	
	这种方法必须将数据从数据集复制到映射中，破坏编译时检查，不是一个好方法。

- 采用数据传输对象。

*表数据入口*适用于事务脚本。
*表数据入口*是Windows世界中常用的数据库访问形式。

###10.2 行数据入口（Row Data Gateway）
充当数据源中单条记录入口的对象，每一行一个实例。

*行数据入口*面对的问题是：在哪里存放产生该模式的查找操作。可以选择静态查找方法，但该方法不支持多种数据源，因此有必要设置单独的查找方法，每一张表都有一个查找方法类和一个入口来获取结果。

**行数据入口** 和 **活动记录** 区别：关键在于是否存在任何领域逻辑，如果存在，则是活动记录。因为*行数据入口*仅包含数据库逻辑而没有领域逻辑。